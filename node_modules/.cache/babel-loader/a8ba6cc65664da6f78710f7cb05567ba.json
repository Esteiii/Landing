{"ast":null,"code":"var _this = this;\n\nimport React, { Fragment, useCallback, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Image from './components/Image';\nimport ZoomImage from './components/ZoomImage';\nimport FullscreenPortal from './components/FullscreenPortal';\n\nvar InnerImageZoom = function InnerImageZoom(_ref) {\n  var _ref$moveType = _ref.moveType,\n      moveType = _ref$moveType === void 0 ? 'pan' : _ref$moveType,\n      _ref$zoomType = _ref.zoomType,\n      zoomType = _ref$zoomType === void 0 ? 'click' : _ref$zoomType,\n      src = _ref.src,\n      sources = _ref.sources,\n      width = _ref.width,\n      height = _ref.height,\n      hasSpacer = _ref.hasSpacer,\n      _ref$imgAttributes = _ref.imgAttributes,\n      imgAttributes = _ref$imgAttributes === void 0 ? {} : _ref$imgAttributes,\n      zoomSrc = _ref.zoomSrc,\n      _ref$zoomScale = _ref.zoomScale,\n      zoomScale = _ref$zoomScale === void 0 ? 1 : _ref$zoomScale,\n      zoomPreload = _ref.zoomPreload,\n      _ref$fadeDuration = _ref.fadeDuration,\n      fadeDuration = _ref$fadeDuration === void 0 ? 150 : _ref$fadeDuration,\n      fullscreenOnMobile = _ref.fullscreenOnMobile,\n      _ref$mobileBreakpoint = _ref.mobileBreakpoint,\n      mobileBreakpoint = _ref$mobileBreakpoint === void 0 ? 640 : _ref$mobileBreakpoint,\n      hideCloseButton = _ref.hideCloseButton,\n      hideHint = _ref.hideHint,\n      className = _ref.className,\n      afterZoomIn = _ref.afterZoomIn,\n      afterZoomOut = _ref.afterZoomOut;\n  var img = useRef(null);\n  var zoomImg = useRef(null);\n  var imgProps = useRef({});\n\n  var _useState = useState(zoomPreload),\n      isActive = _useState[0],\n      setIsActive = _useState[1];\n\n  var _useState2 = useState(false),\n      isTouch = _useState2[0],\n      setIsTouch = _useState2[1];\n\n  var _useState3 = useState(false),\n      isZoomed = _useState3[0],\n      setIsZoomed = _useState3[1];\n\n  var _useState4 = useState(false),\n      isFullscreen = _useState4[0],\n      setIsFullscreen = _useState4[1];\n\n  var _useState5 = useState(false),\n      isDragging = _useState5[0],\n      setIsDragging = _useState5[1];\n\n  var _useState6 = useState(false),\n      isValidDrag = _useState6[0],\n      setIsValidDrag = _useState6[1];\n\n  var _useState7 = useState(false),\n      isFading = _useState7[0],\n      setIsFading = _useState7[1];\n\n  var _useState8 = useState(moveType),\n      currentMoveType = _useState8[0],\n      setCurrentMoveType = _useState8[1];\n\n  var _useState9 = useState(0),\n      left = _useState9[0],\n      setLeft = _useState9[1];\n\n  var _useState10 = useState(0),\n      top = _useState10[0],\n      setTop = _useState10[1];\n\n  var handleMouseEnter = function handleMouseEnter(e) {\n    setIsActive(true);\n    setIsFading(false);\n    zoomType === 'hover' && !isZoomed && handleClick(e);\n  };\n\n  var handleTouchStart = function handleTouchStart() {\n    setIsTouch(true);\n    setIsFullscreen(getFullscreenStatus(fullscreenOnMobile, mobileBreakpoint));\n    setCurrentMoveType('drag');\n  };\n\n  var handleClick = function handleClick(e) {\n    if (isZoomed) {\n      if (isTouch) {\n        hideCloseButton && handleClose(e);\n      } else {\n        !isValidDrag && zoomOut();\n      }\n\n      return;\n    }\n\n    isTouch && setIsActive(true);\n\n    if (zoomImg.current) {\n      handleLoad({\n        target: zoomImg.current\n      });\n      zoomIn(e.pageX, e.pageY);\n    } else {\n      imgProps.current.onLoadCallback = zoomIn.bind(_this, e.pageX, e.pageY);\n    }\n  };\n\n  var handleLoad = function handleLoad(e) {\n    var scaledDimensions = getScaledDimensions(e.target, zoomScale);\n    zoomImg.current = e.target;\n    zoomImg.current.setAttribute('width', scaledDimensions.width);\n    zoomImg.current.setAttribute('height', scaledDimensions.height);\n    imgProps.current.scaledDimensions = scaledDimensions;\n    imgProps.current.bounds = getBounds(img.current, false);\n    imgProps.current.ratios = getRatios(imgProps.current.bounds, scaledDimensions);\n\n    if (imgProps.current.onLoadCallback) {\n      imgProps.current.onLoadCallback();\n      imgProps.current.onLoadCallback = null;\n    }\n  };\n\n  var handleMouseMove = function handleMouseMove(e) {\n    var left = e.pageX - imgProps.current.offsets.x;\n    var top = e.pageY - imgProps.current.offsets.y;\n    left = Math.max(Math.min(left, imgProps.current.bounds.width), 0);\n    top = Math.max(Math.min(top, imgProps.current.bounds.height), 0);\n    setLeft(left * -imgProps.current.ratios.x);\n    setTop(top * -imgProps.current.ratios.y);\n  };\n\n  var handleDragStart = function handleDragStart(e) {\n    var pageX = typeof e.pageX === 'number' ? e.pageX : e.changedTouches[0].pageX;\n    var pageY = typeof e.pageY === 'number' ? e.pageY : e.changedTouches[0].pageY;\n    imgProps.current.offsets = getOffsets(pageX, pageY, zoomImg.current.offsetLeft, zoomImg.current.offsetTop);\n    setIsDragging(true);\n\n    if (!isTouch) {\n      imgProps.current.eventPosition = {\n        x: e.pageX,\n        y: e.pageY\n      };\n    }\n  };\n\n  var handleDragMove = useCallback(function (e) {\n    e.stopPropagation();\n    var pageX = typeof e.pageX === 'number' ? e.pageX : e.changedTouches[0].pageX;\n    var pageY = typeof e.pageY === 'number' ? e.pageY : e.changedTouches[0].pageY;\n    var left = pageX - imgProps.current.offsets.x;\n    var top = pageY - imgProps.current.offsets.y;\n    left = Math.max(Math.min(left, 0), (imgProps.current.scaledDimensions.width - imgProps.current.bounds.width) * -1);\n    top = Math.max(Math.min(top, 0), (imgProps.current.scaledDimensions.height - imgProps.current.bounds.height) * -1);\n    setLeft(left);\n    setTop(top);\n  }, []);\n\n  var handleDragEnd = function handleDragEnd(e) {\n    setIsDragging(false);\n\n    if (!isTouch) {\n      var moveX = Math.abs(e.pageX - imgProps.current.eventPosition.x);\n      var moveY = Math.abs(e.pageY - imgProps.current.eventPosition.y);\n      setIsValidDrag(moveX > 5 || moveY > 5);\n    }\n  };\n\n  var handleMouseLeave = function handleMouseLeave(e) {\n    currentMoveType === 'drag' && isZoomed ? handleDragEnd(e) : handleClose(e);\n  };\n\n  var handleClose = function handleClose(e) {\n    if (!(!isTouch && e.target.classList.contains('iiz__close'))) {\n      if (!isZoomed || isFullscreen || !fadeDuration) {\n        handleFadeOut({}, true);\n      } else {\n        setIsFading(true);\n      }\n    }\n\n    zoomOut();\n  };\n\n  var handleFadeOut = function handleFadeOut(e, noTransition) {\n    if (noTransition || e.propertyName === 'opacity' && img.current.contains(e.target)) {\n      if (zoomPreload && isTouch || !zoomPreload) {\n        zoomImg.current = null;\n        imgProps.current = getDefaults();\n        setIsActive(false);\n      }\n\n      setIsTouch(false);\n      setIsFullscreen(false);\n      setCurrentMoveType(moveType);\n      setIsFading(false);\n    }\n  };\n\n  var initialMove = function initialMove(pageX, pageY) {\n    imgProps.current.offsets = getOffsets(window.pageXOffset, window.pageYOffset, -imgProps.current.bounds.left, -imgProps.current.bounds.top);\n    handleMouseMove({\n      pageX: pageX,\n      pageY: pageY\n    });\n  };\n\n  var initialDrag = function initialDrag(pageX, pageY) {\n    var initialPageX = (pageX - (window.pageXOffset + imgProps.current.bounds.left)) * -imgProps.current.ratios.x;\n    var initialPageY = (pageY - (window.pageYOffset + imgProps.current.bounds.top)) * -imgProps.current.ratios.y;\n    initialPageX = initialPageX + (isFullscreen ? (window.innerWidth - imgProps.current.bounds.width) / 2 : 0);\n    initialPageY = initialPageY + (isFullscreen ? (window.innerHeight - imgProps.current.bounds.height) / 2 : 0);\n    imgProps.current.bounds = getBounds(img.current, isFullscreen);\n    imgProps.current.offsets = getOffsets(0, 0, 0, 0);\n    handleDragMove({\n      changedTouches: [{\n        pageX: initialPageX,\n        pageY: initialPageY\n      }],\n      preventDefault: function preventDefault() {},\n      stopPropagation: function stopPropagation() {}\n    });\n  };\n\n  var zoomIn = function zoomIn(pageX, pageY) {\n    setIsZoomed(true);\n    currentMoveType === 'drag' ? initialDrag(pageX, pageY) : initialMove(pageX, pageY);\n    afterZoomIn && afterZoomIn();\n  };\n\n  var zoomOut = function zoomOut() {\n    setIsZoomed(false);\n    afterZoomOut && afterZoomOut();\n  };\n\n  var getDefaults = function getDefaults() {\n    return {\n      onLoadCallback: null,\n      bounds: {},\n      offsets: {},\n      ratios: {},\n      eventPosition: {},\n      scaledDimensions: {}\n    };\n  };\n\n  var getBounds = function getBounds(img, isFullscreen) {\n    if (isFullscreen) {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        left: 0,\n        top: 0\n      };\n    }\n\n    return img.getBoundingClientRect();\n  };\n\n  var getOffsets = function getOffsets(pageX, pageY, left, top) {\n    return {\n      x: pageX - left,\n      y: pageY - top\n    };\n  };\n\n  var getRatios = function getRatios(bounds, dimensions) {\n    return {\n      x: (dimensions.width - bounds.width) / bounds.width,\n      y: (dimensions.height - bounds.height) / bounds.height\n    };\n  };\n\n  var getFullscreenStatus = function getFullscreenStatus(fullscreenOnMobile, mobileBreakpoint) {\n    return fullscreenOnMobile && window.matchMedia && window.matchMedia(\"(max-width: \" + mobileBreakpoint + \"px)\").matches;\n  };\n\n  var getScaledDimensions = function getScaledDimensions(zoomImg, zoomScale) {\n    return {\n      width: zoomImg.naturalWidth * zoomScale,\n      height: zoomImg.naturalHeight * zoomScale\n    };\n  };\n\n  var zoomImageProps = {\n    src: zoomSrc || src,\n    fadeDuration: isFullscreen ? 0 : fadeDuration,\n    top: top,\n    left: left,\n    isZoomed: isZoomed,\n    onLoad: handleLoad,\n    onDragStart: currentMoveType === 'drag' ? handleDragStart : null,\n    onDragEnd: currentMoveType === 'drag' ? handleDragEnd : null,\n    onClose: !hideCloseButton && currentMoveType === 'drag' ? handleClose : null,\n    onFadeOut: isFading ? handleFadeOut : null\n  };\n  useEffect(function () {\n    imgProps.current = getDefaults();\n  }, []);\n  useEffect(function () {\n    getFullscreenStatus(fullscreenOnMobile, mobileBreakpoint) && setIsActive(false);\n  }, [fullscreenOnMobile, mobileBreakpoint]);\n  useEffect(function () {\n    if (!zoomImg.current) {\n      return;\n    }\n\n    var eventType = isTouch ? 'touchmove' : 'mousemove';\n\n    if (isDragging) {\n      zoomImg.current.addEventListener(eventType, handleDragMove, {\n        passive: true\n      });\n    } else {\n      zoomImg.current.removeEventListener(eventType, handleDragMove);\n    }\n  }, [isDragging, isTouch, handleDragMove]);\n  return /*#__PURE__*/React.createElement(\"figure\", {\n    className: \"iiz \" + (currentMoveType === 'drag' ? 'iiz--drag' : '') + \" \" + (className ? className : ''),\n    style: {\n      width: width\n    },\n    ref: img,\n    onTouchStart: isZoomed ? null : handleTouchStart,\n    onClick: handleClick,\n    onMouseEnter: isTouch ? null : handleMouseEnter,\n    onMouseMove: currentMoveType === 'drag' || !isZoomed ? null : handleMouseMove,\n    onMouseLeave: isTouch ? null : handleMouseLeave\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: src,\n    sources: sources,\n    width: width,\n    height: height,\n    hasSpacer: hasSpacer,\n    imgAttributes: imgAttributes,\n    fadeDuration: fadeDuration,\n    isZoomed: isZoomed\n  }), isActive && /*#__PURE__*/React.createElement(Fragment, null, isFullscreen ? /*#__PURE__*/React.createElement(FullscreenPortal, null, /*#__PURE__*/React.createElement(ZoomImage, zoomImageProps)) : /*#__PURE__*/React.createElement(ZoomImage, zoomImageProps)), !hideHint && !isZoomed && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"iiz__btn iiz__hint\"\n  }));\n};\n\nInnerImageZoom.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  moveType: PropTypes.string,\n  zoomType: PropTypes.string,\n  src: PropTypes.string.isRequired,\n  sources: PropTypes.array,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  hasSpacer: PropTypes.bool,\n  imgAttributes: PropTypes.object,\n  zoomSrc: PropTypes.string,\n  zoomScale: PropTypes.number,\n  zoomPreload: PropTypes.bool,\n  fadeDuration: PropTypes.number,\n  fullscreenOnMobile: PropTypes.bool,\n  mobileBreakpoint: PropTypes.number,\n  hideCloseButton: PropTypes.bool,\n  hideHint: PropTypes.bool,\n  className: PropTypes.string,\n  afterZoomIn: PropTypes.func,\n  afterZoomOut: PropTypes.func\n} : {};\nexport default InnerImageZoom;","map":{"version":3,"sources":["C:/Users/ravan/Documents/GitHub/simplera_template_landing/node_modules/react-inner-image-zoom/es/InnerImageZoom/InnerImageZoom.js"],"names":["_this","React","Fragment","useCallback","useEffect","useRef","useState","PropTypes","Image","ZoomImage","FullscreenPortal","InnerImageZoom","_ref","_ref$moveType","moveType","_ref$zoomType","zoomType","src","sources","width","height","hasSpacer","_ref$imgAttributes","imgAttributes","zoomSrc","_ref$zoomScale","zoomScale","zoomPreload","_ref$fadeDuration","fadeDuration","fullscreenOnMobile","_ref$mobileBreakpoint","mobileBreakpoint","hideCloseButton","hideHint","className","afterZoomIn","afterZoomOut","img","zoomImg","imgProps","_useState","isActive","setIsActive","_useState2","isTouch","setIsTouch","_useState3","isZoomed","setIsZoomed","_useState4","isFullscreen","setIsFullscreen","_useState5","isDragging","setIsDragging","_useState6","isValidDrag","setIsValidDrag","_useState7","isFading","setIsFading","_useState8","currentMoveType","setCurrentMoveType","_useState9","left","setLeft","_useState10","top","setTop","handleMouseEnter","e","handleClick","handleTouchStart","getFullscreenStatus","handleClose","zoomOut","current","handleLoad","target","zoomIn","pageX","pageY","onLoadCallback","bind","scaledDimensions","getScaledDimensions","setAttribute","bounds","getBounds","ratios","getRatios","handleMouseMove","offsets","x","y","Math","max","min","handleDragStart","changedTouches","getOffsets","offsetLeft","offsetTop","eventPosition","handleDragMove","stopPropagation","handleDragEnd","moveX","abs","moveY","handleMouseLeave","classList","contains","handleFadeOut","noTransition","propertyName","getDefaults","initialMove","window","pageXOffset","pageYOffset","initialDrag","initialPageX","initialPageY","innerWidth","innerHeight","preventDefault","getBoundingClientRect","dimensions","matchMedia","matches","naturalWidth","naturalHeight","zoomImageProps","onLoad","onDragStart","onDragEnd","onClose","onFadeOut","eventType","addEventListener","passive","removeEventListener","createElement","style","ref","onTouchStart","onClick","onMouseEnter","onMouseMove","onMouseLeave","propTypes","process","env","NODE_ENV","string","isRequired","array","number","bool","object","func"],"mappings":"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","sourcesContent":["var _this = this;\n\nimport React, { Fragment, useCallback, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Image from './components/Image';\nimport ZoomImage from './components/ZoomImage';\nimport FullscreenPortal from './components/FullscreenPortal';\n\nvar InnerImageZoom = function InnerImageZoom(_ref) {\n  var _ref$moveType = _ref.moveType,\n      moveType = _ref$moveType === void 0 ? 'pan' : _ref$moveType,\n      _ref$zoomType = _ref.zoomType,\n      zoomType = _ref$zoomType === void 0 ? 'click' : _ref$zoomType,\n      src = _ref.src,\n      sources = _ref.sources,\n      width = _ref.width,\n      height = _ref.height,\n      hasSpacer = _ref.hasSpacer,\n      _ref$imgAttributes = _ref.imgAttributes,\n      imgAttributes = _ref$imgAttributes === void 0 ? {} : _ref$imgAttributes,\n      zoomSrc = _ref.zoomSrc,\n      _ref$zoomScale = _ref.zoomScale,\n      zoomScale = _ref$zoomScale === void 0 ? 1 : _ref$zoomScale,\n      zoomPreload = _ref.zoomPreload,\n      _ref$fadeDuration = _ref.fadeDuration,\n      fadeDuration = _ref$fadeDuration === void 0 ? 150 : _ref$fadeDuration,\n      fullscreenOnMobile = _ref.fullscreenOnMobile,\n      _ref$mobileBreakpoint = _ref.mobileBreakpoint,\n      mobileBreakpoint = _ref$mobileBreakpoint === void 0 ? 640 : _ref$mobileBreakpoint,\n      hideCloseButton = _ref.hideCloseButton,\n      hideHint = _ref.hideHint,\n      className = _ref.className,\n      afterZoomIn = _ref.afterZoomIn,\n      afterZoomOut = _ref.afterZoomOut;\n  var img = useRef(null);\n  var zoomImg = useRef(null);\n  var imgProps = useRef({});\n\n  var _useState = useState(zoomPreload),\n      isActive = _useState[0],\n      setIsActive = _useState[1];\n\n  var _useState2 = useState(false),\n      isTouch = _useState2[0],\n      setIsTouch = _useState2[1];\n\n  var _useState3 = useState(false),\n      isZoomed = _useState3[0],\n      setIsZoomed = _useState3[1];\n\n  var _useState4 = useState(false),\n      isFullscreen = _useState4[0],\n      setIsFullscreen = _useState4[1];\n\n  var _useState5 = useState(false),\n      isDragging = _useState5[0],\n      setIsDragging = _useState5[1];\n\n  var _useState6 = useState(false),\n      isValidDrag = _useState6[0],\n      setIsValidDrag = _useState6[1];\n\n  var _useState7 = useState(false),\n      isFading = _useState7[0],\n      setIsFading = _useState7[1];\n\n  var _useState8 = useState(moveType),\n      currentMoveType = _useState8[0],\n      setCurrentMoveType = _useState8[1];\n\n  var _useState9 = useState(0),\n      left = _useState9[0],\n      setLeft = _useState9[1];\n\n  var _useState10 = useState(0),\n      top = _useState10[0],\n      setTop = _useState10[1];\n\n  var handleMouseEnter = function handleMouseEnter(e) {\n    setIsActive(true);\n    setIsFading(false);\n    zoomType === 'hover' && !isZoomed && handleClick(e);\n  };\n\n  var handleTouchStart = function handleTouchStart() {\n    setIsTouch(true);\n    setIsFullscreen(getFullscreenStatus(fullscreenOnMobile, mobileBreakpoint));\n    setCurrentMoveType('drag');\n  };\n\n  var handleClick = function handleClick(e) {\n    if (isZoomed) {\n      if (isTouch) {\n        hideCloseButton && handleClose(e);\n      } else {\n        !isValidDrag && zoomOut();\n      }\n\n      return;\n    }\n\n    isTouch && setIsActive(true);\n\n    if (zoomImg.current) {\n      handleLoad({\n        target: zoomImg.current\n      });\n      zoomIn(e.pageX, e.pageY);\n    } else {\n      imgProps.current.onLoadCallback = zoomIn.bind(_this, e.pageX, e.pageY);\n    }\n  };\n\n  var handleLoad = function handleLoad(e) {\n    var scaledDimensions = getScaledDimensions(e.target, zoomScale);\n    zoomImg.current = e.target;\n    zoomImg.current.setAttribute('width', scaledDimensions.width);\n    zoomImg.current.setAttribute('height', scaledDimensions.height);\n    imgProps.current.scaledDimensions = scaledDimensions;\n    imgProps.current.bounds = getBounds(img.current, false);\n    imgProps.current.ratios = getRatios(imgProps.current.bounds, scaledDimensions);\n\n    if (imgProps.current.onLoadCallback) {\n      imgProps.current.onLoadCallback();\n      imgProps.current.onLoadCallback = null;\n    }\n  };\n\n  var handleMouseMove = function handleMouseMove(e) {\n    var left = e.pageX - imgProps.current.offsets.x;\n    var top = e.pageY - imgProps.current.offsets.y;\n    left = Math.max(Math.min(left, imgProps.current.bounds.width), 0);\n    top = Math.max(Math.min(top, imgProps.current.bounds.height), 0);\n    setLeft(left * -imgProps.current.ratios.x);\n    setTop(top * -imgProps.current.ratios.y);\n  };\n\n  var handleDragStart = function handleDragStart(e) {\n    var pageX = typeof e.pageX === 'number' ? e.pageX : e.changedTouches[0].pageX;\n    var pageY = typeof e.pageY === 'number' ? e.pageY : e.changedTouches[0].pageY;\n    imgProps.current.offsets = getOffsets(pageX, pageY, zoomImg.current.offsetLeft, zoomImg.current.offsetTop);\n    setIsDragging(true);\n\n    if (!isTouch) {\n      imgProps.current.eventPosition = {\n        x: e.pageX,\n        y: e.pageY\n      };\n    }\n  };\n\n  var handleDragMove = useCallback(function (e) {\n    e.stopPropagation();\n    var pageX = typeof e.pageX === 'number' ? e.pageX : e.changedTouches[0].pageX;\n    var pageY = typeof e.pageY === 'number' ? e.pageY : e.changedTouches[0].pageY;\n    var left = pageX - imgProps.current.offsets.x;\n    var top = pageY - imgProps.current.offsets.y;\n    left = Math.max(Math.min(left, 0), (imgProps.current.scaledDimensions.width - imgProps.current.bounds.width) * -1);\n    top = Math.max(Math.min(top, 0), (imgProps.current.scaledDimensions.height - imgProps.current.bounds.height) * -1);\n    setLeft(left);\n    setTop(top);\n  }, []);\n\n  var handleDragEnd = function handleDragEnd(e) {\n    setIsDragging(false);\n\n    if (!isTouch) {\n      var moveX = Math.abs(e.pageX - imgProps.current.eventPosition.x);\n      var moveY = Math.abs(e.pageY - imgProps.current.eventPosition.y);\n      setIsValidDrag(moveX > 5 || moveY > 5);\n    }\n  };\n\n  var handleMouseLeave = function handleMouseLeave(e) {\n    currentMoveType === 'drag' && isZoomed ? handleDragEnd(e) : handleClose(e);\n  };\n\n  var handleClose = function handleClose(e) {\n    if (!(!isTouch && e.target.classList.contains('iiz__close'))) {\n      if (!isZoomed || isFullscreen || !fadeDuration) {\n        handleFadeOut({}, true);\n      } else {\n        setIsFading(true);\n      }\n    }\n\n    zoomOut();\n  };\n\n  var handleFadeOut = function handleFadeOut(e, noTransition) {\n    if (noTransition || e.propertyName === 'opacity' && img.current.contains(e.target)) {\n      if (zoomPreload && isTouch || !zoomPreload) {\n        zoomImg.current = null;\n        imgProps.current = getDefaults();\n        setIsActive(false);\n      }\n\n      setIsTouch(false);\n      setIsFullscreen(false);\n      setCurrentMoveType(moveType);\n      setIsFading(false);\n    }\n  };\n\n  var initialMove = function initialMove(pageX, pageY) {\n    imgProps.current.offsets = getOffsets(window.pageXOffset, window.pageYOffset, -imgProps.current.bounds.left, -imgProps.current.bounds.top);\n    handleMouseMove({\n      pageX: pageX,\n      pageY: pageY\n    });\n  };\n\n  var initialDrag = function initialDrag(pageX, pageY) {\n    var initialPageX = (pageX - (window.pageXOffset + imgProps.current.bounds.left)) * -imgProps.current.ratios.x;\n    var initialPageY = (pageY - (window.pageYOffset + imgProps.current.bounds.top)) * -imgProps.current.ratios.y;\n    initialPageX = initialPageX + (isFullscreen ? (window.innerWidth - imgProps.current.bounds.width) / 2 : 0);\n    initialPageY = initialPageY + (isFullscreen ? (window.innerHeight - imgProps.current.bounds.height) / 2 : 0);\n    imgProps.current.bounds = getBounds(img.current, isFullscreen);\n    imgProps.current.offsets = getOffsets(0, 0, 0, 0);\n    handleDragMove({\n      changedTouches: [{\n        pageX: initialPageX,\n        pageY: initialPageY\n      }],\n      preventDefault: function preventDefault() {},\n      stopPropagation: function stopPropagation() {}\n    });\n  };\n\n  var zoomIn = function zoomIn(pageX, pageY) {\n    setIsZoomed(true);\n    currentMoveType === 'drag' ? initialDrag(pageX, pageY) : initialMove(pageX, pageY);\n    afterZoomIn && afterZoomIn();\n  };\n\n  var zoomOut = function zoomOut() {\n    setIsZoomed(false);\n    afterZoomOut && afterZoomOut();\n  };\n\n  var getDefaults = function getDefaults() {\n    return {\n      onLoadCallback: null,\n      bounds: {},\n      offsets: {},\n      ratios: {},\n      eventPosition: {},\n      scaledDimensions: {}\n    };\n  };\n\n  var getBounds = function getBounds(img, isFullscreen) {\n    if (isFullscreen) {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        left: 0,\n        top: 0\n      };\n    }\n\n    return img.getBoundingClientRect();\n  };\n\n  var getOffsets = function getOffsets(pageX, pageY, left, top) {\n    return {\n      x: pageX - left,\n      y: pageY - top\n    };\n  };\n\n  var getRatios = function getRatios(bounds, dimensions) {\n    return {\n      x: (dimensions.width - bounds.width) / bounds.width,\n      y: (dimensions.height - bounds.height) / bounds.height\n    };\n  };\n\n  var getFullscreenStatus = function getFullscreenStatus(fullscreenOnMobile, mobileBreakpoint) {\n    return fullscreenOnMobile && window.matchMedia && window.matchMedia(\"(max-width: \" + mobileBreakpoint + \"px)\").matches;\n  };\n\n  var getScaledDimensions = function getScaledDimensions(zoomImg, zoomScale) {\n    return {\n      width: zoomImg.naturalWidth * zoomScale,\n      height: zoomImg.naturalHeight * zoomScale\n    };\n  };\n\n  var zoomImageProps = {\n    src: zoomSrc || src,\n    fadeDuration: isFullscreen ? 0 : fadeDuration,\n    top: top,\n    left: left,\n    isZoomed: isZoomed,\n    onLoad: handleLoad,\n    onDragStart: currentMoveType === 'drag' ? handleDragStart : null,\n    onDragEnd: currentMoveType === 'drag' ? handleDragEnd : null,\n    onClose: !hideCloseButton && currentMoveType === 'drag' ? handleClose : null,\n    onFadeOut: isFading ? handleFadeOut : null\n  };\n  useEffect(function () {\n    imgProps.current = getDefaults();\n  }, []);\n  useEffect(function () {\n    getFullscreenStatus(fullscreenOnMobile, mobileBreakpoint) && setIsActive(false);\n  }, [fullscreenOnMobile, mobileBreakpoint]);\n  useEffect(function () {\n    if (!zoomImg.current) {\n      return;\n    }\n\n    var eventType = isTouch ? 'touchmove' : 'mousemove';\n\n    if (isDragging) {\n      zoomImg.current.addEventListener(eventType, handleDragMove, {\n        passive: true\n      });\n    } else {\n      zoomImg.current.removeEventListener(eventType, handleDragMove);\n    }\n  }, [isDragging, isTouch, handleDragMove]);\n  return /*#__PURE__*/React.createElement(\"figure\", {\n    className: \"iiz \" + (currentMoveType === 'drag' ? 'iiz--drag' : '') + \" \" + (className ? className : ''),\n    style: {\n      width: width\n    },\n    ref: img,\n    onTouchStart: isZoomed ? null : handleTouchStart,\n    onClick: handleClick,\n    onMouseEnter: isTouch ? null : handleMouseEnter,\n    onMouseMove: currentMoveType === 'drag' || !isZoomed ? null : handleMouseMove,\n    onMouseLeave: isTouch ? null : handleMouseLeave\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: src,\n    sources: sources,\n    width: width,\n    height: height,\n    hasSpacer: hasSpacer,\n    imgAttributes: imgAttributes,\n    fadeDuration: fadeDuration,\n    isZoomed: isZoomed\n  }), isActive && /*#__PURE__*/React.createElement(Fragment, null, isFullscreen ? /*#__PURE__*/React.createElement(FullscreenPortal, null, /*#__PURE__*/React.createElement(ZoomImage, zoomImageProps)) : /*#__PURE__*/React.createElement(ZoomImage, zoomImageProps)), !hideHint && !isZoomed && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"iiz__btn iiz__hint\"\n  }));\n};\n\nInnerImageZoom.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  moveType: PropTypes.string,\n  zoomType: PropTypes.string,\n  src: PropTypes.string.isRequired,\n  sources: PropTypes.array,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  hasSpacer: PropTypes.bool,\n  imgAttributes: PropTypes.object,\n  zoomSrc: PropTypes.string,\n  zoomScale: PropTypes.number,\n  zoomPreload: PropTypes.bool,\n  fadeDuration: PropTypes.number,\n  fullscreenOnMobile: PropTypes.bool,\n  mobileBreakpoint: PropTypes.number,\n  hideCloseButton: PropTypes.bool,\n  hideHint: PropTypes.bool,\n  className: PropTypes.string,\n  afterZoomIn: PropTypes.func,\n  afterZoomOut: PropTypes.func\n} : {};\nexport default InnerImageZoom;"]},"metadata":{},"sourceType":"module"}